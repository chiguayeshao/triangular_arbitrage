# 关于三角套利的理解

## 三角套利的模型

### 图示

### 策略描述

1. 选择两个交易市场AB如（USDT/BTC）
2. 找到同时以A和B计价的货币（如ETH/USDT ， ETH/BTC）
3. 执行套利步骤
4. 根据获利比例选择合适的套利货币

### 举例

1. 现在我需要更多的RMB
2. 恰巧目前的市场可以用100RMB购买100g黄金
3. 又恰巧100g黄金可以购买1瓶茅台
4. 再恰巧卖出1瓶茅台可以获得200RMB

因此在上述过程中，使用了以下三个交易对

- 黄金/RMB （使用RMB购买黄金）
- 茅台/黄金 （使用黄金购买茅台）
-  RMB/茅台 （使用茅台购买RMB，也就是卖出茅台）

### 套利步骤

#### 用数学方式表达

1. 假设我们利用x套利

2. A持仓量： amount_a

   注：如有100RMB

3. 可以买入B的数量： amount_a / price_b

   注：price_b 为 B对A的交易对价格

   如：100g黄金 / 100RMB

4. 可以买入x的数量： (amount_a / price_b) / price_fuck

   注：price_fuck 为x对B的交易对价格

   如100g黄金 / 1瓶茅台

5. 卖出所有x，获得A的数量：((amount_a / price_b) / price_fuck)* price_x

   注：price_x 为x对A的交易对价格

   如：1瓶茅台 / 200RMB

6. 计算得出获利比例：

   ( ((amount_a / price_b) / price_fuck)* price_x - amount_a) / amount_a

   计算得出

   Price_x / (price_b * price_fuck) -1

   举例

   200/（1*100）- 1 =  2

#### 我们的需求

- 找到可以用来套利的货币

#### 注意事项

- 行情获取的过程中，要尽量保证行情的数据是 <b>同一时刻</b> 的

#### 难点

- 同时监控所有适合三角套利的货币
- 在市场上同时成交
- 对交易系统的并发要求高

## 程序实现

